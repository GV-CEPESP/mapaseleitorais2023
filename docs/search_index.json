[["index.html", "Mapas Eleitorais com R Parte 1 Sobre o Workshop 1.1 Pré-Requisitos 1.2 Autores", " Mapas Eleitorais com R Lucas Gelape, João V. Guedes-Neto e Marco Antonio Faganello Parte 1 Sobre o Workshop Em 2018, PT e PSL protagonizaram a disputa pela presidência. No Capão Redondo, a disputa para deputado reproduziu essa tendência. Porém, em Pinheiros, os mais votados saíram desse padrão: foram PSOL e Novo. Mapas eleitorais permitem investigar esse fenômeno. O objetivo desse workshop é ensinar os participantes a trabalhar com dados espaciais no R a partir de informações eleitorais. Nele, vamos apresentar algumas características e cuidados especiais com esse tipo de dados, como associar os resultados eleitorais ao espaço (inclusive intramunicipais), e a produzir mapas. 1.1 Pré-Requisitos R, RStudio, pacotes (tidyverse e sf) 1.2 Autores Lucas Gelape é pesquisador de pós-doutorado no CEPESP FGV, doutor em Ciência Política pela Universidade de São Paulo. Atualmente, pesquisa temas relacionados a política local e geografia eleitoral. No jornalismo, trabalhou no G1 e no Volt Data Lab/Núcleo. João V. Guedes-Neto é pesquisador de pós-doutorado no CEPESP FGV, doutor em Ciência Política pela Universidade de Pittsburgh. Marco Antonio Faganello é Pesquisador, cientista de dados e pós-doutorando no CEPESP FGV, doutor em Ciência Política pela Universidade Estadual de Campinas (UNICAMP). Atualmente, pesquisa temas relacionados à eleições, partidos, direita e geografia eleitoral. "],["meu-primeiro-mapa.html", "Parte 2 Meu Primeiro Mapa 2.1 A Eleição Presidencial de 2014", " Parte 2 Meu Primeiro Mapa Texto texto texto. 2.1 A Eleição Presidencial de 2014 Em 2014, a então presidente Dilma Rousseff (PT) enfrentou o tucano Aécio Neves no segundo turno da eleição presidencial. Para visualizar o resultado desta disputa, elaboraremos um “mapa fácil” que colore os estados brasileiros de acordo com seu candidato mais votado. Para tal, utilizaremos apenas quatro pacotes. O primeiro deles, dplyr, nos ajuda a preparar a tabela com os dados eleitorais e realizar manipulações a fim de prepará-lo para nossas análises. Com função semelhante, o sf nos auxiliar a manipular dados espaciais–essencial para a maior parte das análise que utilizam mapas. O ggplot2, pacote frequentemente utilizado para visualização de dados, nos ajudará a “plotar” as informações nos mapas. Por fim, o pacote geobr foi desenvolvido para gerar “shape files” (arquivos com dados espaciais), os quais utilizaremos como parâmetros para nossos mapas. ## Carregando os pacotes relevantes library(dplyr) ## Gramática para manipulação de dados library(sf) ## Gramática para dados espaciais library(ggplot2) ## Elaboração de gráficos library(geobr) ## Mapas brasileiros Nosso próximo passo é gerar uma tabela (tibble) com os dados que queremos plotar no mapa. Ou seja, uma coluna para os estados brasileiros e outra indicando o candidato vencedor. É importante notar que o nome da variável “estados” (a primeira linha da coluna) precisa estar alinhada com a nomenclatura utilizada no pacote geobr. Por tal motivo, utilizaremos o termo abbrev_state (referindo-se a abreviação dos nomes dos estados). No bloco abaixo, apresentamos uma forma simples para gerar esta tabela. No entanto, também é possível produzí-la no MS Excel (ou seu software de preferência) e importá-la para o R. ganhadores_2014 &lt;- tibble(abbrev_state = c(&quot;RS&quot;, &quot;SC&quot;, &quot;PR&quot;, &quot;SP&quot;, &quot;MG&quot;, &quot;RJ&quot;, &quot;ES&quot;, &quot;MS&quot;, &quot;MT&quot;, &quot;GO&quot;, &quot;DF&quot;, &quot;TO&quot;, &quot;RO&quot;, &quot;AC&quot;, &quot;AM&quot;, &quot;PA&quot;, &quot;AP&quot;, &quot;RR&quot;, &quot;MA&quot;, &quot;PI&quot;, &quot;CE&quot;, &quot;RN&quot;, &quot;PB&quot;, &quot;PE&quot;, &quot;AL&quot;, &quot;SE&quot;, &quot;BA&quot;), ganhador = c(&quot;Aécio&quot;, &quot;Aécio&quot;, &quot;Aécio&quot;, &quot;Aécio&quot;, &quot;Dilma&quot;, &quot;Dilma&quot;, &quot;Aécio&quot;, &quot;Aécio&quot;, &quot;Aécio&quot;, &quot;Aécio&quot;,&quot;Aécio&quot;, &quot;Dilma&quot;, &quot;Aécio&quot;, &quot;Aécio&quot;, &quot;Dilma&quot;, &quot;Dilma&quot;, &quot;Dilma&quot;, &quot;Aécio&quot;, &quot;Dilma&quot;, &quot;Dilma&quot;, &quot;Dilma&quot;, &quot;Dilma&quot;, &quot;Dilma&quot;, &quot;Dilma&quot;, &quot;Dilma&quot;, &quot;Dilma&quot;, &quot;Dilma&quot;)) A tabela (tibble) construída será como esta que apresentamos abaixo. data.frame(ganhadores_2014) ## abbrev_state ganhador ## 1 RS Aécio ## 2 SC Aécio ## 3 PR Aécio ## 4 SP Aécio ## 5 MG Dilma ## 6 RJ Dilma ## 7 ES Aécio ## 8 MS Aécio ## 9 MT Aécio ## 10 GO Aécio ## 11 DF Aécio ## 12 TO Dilma ## 13 RO Aécio ## 14 AC Aécio ## 15 AM Dilma ## 16 PA Dilma ## 17 AP Dilma ## 18 RR Aécio ## 19 MA Dilma ## 20 PI Dilma ## 21 CE Dilma ## 22 RN Dilma ## 23 PB Dilma ## 24 PE Dilma ## 25 AL Dilma ## 26 SE Dilma ## 27 BA Dilma Nosso próximo passo é baixar os dados cartográficos do pacote geobr. Basicamente, queremos baixar uma tabela que contenha os estados brasileiros e informações geográficas (e geométricas!) nos informando como eles devem ser “desenhados”. mapa_brasil &lt;- read_state(code_state=&quot;all&quot;, year=2018, showProgress = FALSE) Agora temos dois tibbles complementares. O ganhadores_2014 inclui qual candidato ganhou o segundo turno da eleição presidencial de 2014 em cada estado brasileiro. O mapa_brasil contém informação cartográfica sobre cada um dos estados brasileiros. Como os estados são identificados a partir da coluna abbrev_state em ambos os bancos de dados, agora podemos utilizar o comando left_join para integrá-los. ganhadores_2014 &lt;- left_join(mapa_brasil, ganhadores_2014, by = &quot;abbrev_state&quot;) Isto gera uma tabela na qual estão presentes os estados, seu devidos ganhadores e os dados cartográficos. A partir destas informações, podemos usar o comando ggplot para elaborar o mapa brasileiro colorido com base nos ganhadores. Note que utilizamos a função mais básica possível a fim de gerar este mapa. Ao longo deste workshop, aprenderemos como mudar sua aparência. ganhadores_2014 %&gt;% ggplot() + ## Gera o gráfico geom_sf(aes_string(fill = &quot;ganhador&quot;)) ## Identifica a coluna &quot;ganhador&quot; como fonte para colorir os estados "],["mapa-municipal.html", "Parte 3 Mapa municipal", " Parte 3 Mapa municipal Texto texto texto. "],["exercício-final.html", "Parte 4 Exercício Final", " Parte 4 Exercício Final Texto texto texto. "],["extra.html", "Parte 5 Extra", " Parte 5 Extra Texto texto texto. "],["references.html", "References", " References "]]
